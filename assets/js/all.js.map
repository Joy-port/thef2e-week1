{"version":3,"sources":["all.js"],"names":["viewList","document","querySelector","foodList","hotelList","data","type","city","num","choseDataType","getAPI","inputType","inputCity","inputNum","axios","get","headers","getAuthorizationHeader","then","res","console","log","renderType","error","AppID","AppKey","GMTString","Date","toGMTString","ShaObj","jsSHA","setHMACKey","update","HMAC","getHMAC","Authorization","renderViewData","renderFoodData","renderHotelData","str","forEach","item","content","Picture","PictureUrl1","Name","City","innerHTML","Address","OpenTime","Phone","init"],"mappings":"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","file":"all.js","sourcesContent":["// APP ID：bbbf44c0e2534c17bbf5553afe5cfb24\n// APP Key：YLongjG_6wqXgBm5FQ4LIpW7bPQ\n\n\n//景點\n//https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot?$top=30&$format=JSON\n//＋市區\n//https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot/Taipei?$top=30&$format=JSON\n\n\n//美食\n//https://ptx.transportdata.tw/MOTC/v2/Tourism/Restaurant/Taipei?$top=30&$format=JSON\n\n\n//住宿景點\n//https://ptx.transportdata.tw/MOTC/v2/Tourism/Hotel/Taipei?$top=30&$format=JSON\n\n\n//觀光活動\n//https://ptx.transportdata.tw/MOTC/v2/Tourism/Activity/Taipei?$top=30&$format=JSON\n\nconst viewList = document.querySelector('.js-view-list');\nconst foodList = document.querySelector('.js-food-list');\nconst hotelList = document.querySelector('.js-hotel-list');\nlet data = [];\nlet type = '';\nlet city = '';\nlet num = 3;\n\nfunction choseDataType(type, city, num){\n   switch(type){\n      case'ScenicSpot':\n      getAPI('ScenicSpot', city, num);\n      break;\n      case'Restaurant':\n      getAPI('Restaurant', city, num);\n      break;\n      case'Hotel':\n      getAPI('Hotel', city, num);\n      break;\n      case'Activity':\n      getAPI('Activity', city, num);\n      break;\n      default:\n      break ;\n   };\n}\n\nfunction getAPI(inputType, inputCity, inputNum){\n\n  axios.get(\n    `https://ptx.transportdata.tw/MOTC/v2/Tourism/${inputType}/${inputCity}?$top=${inputNum}&$format=JSON`,\n    {\n       headers: getAuthorizationHeader()\n    }\n  )\n  .then(function (res) {\n   data = res.data;\n   console.log(data);\n   renderType(inputType);\n\n  })\n  .catch(function (error) {\n   console.log(error);\n  }); \n}\n\nfunction getAuthorizationHeader() {\n//  填入自己 ID、KEY 開始\n   let AppID = 'bbbf44c0e2534c17bbf5553afe5cfb24';\n   let AppKey = 'YLongjG_6wqXgBm5FQ4LIpW7bPQ';\n//  填入自己 ID、KEY 結束\n   let GMTString = new Date().toGMTString();\n   let ShaObj = new jsSHA('SHA-1', 'TEXT');\n   ShaObj.setHMACKey(AppKey, 'TEXT');\n   ShaObj.update('x-date: ' + GMTString);\n   let HMAC = ShaObj.getHMAC('B64');\n   let Authorization = 'hmac username=\\\"' + AppID + '\\\", algorithm=\\\"hmac-sha1\\\", headers=\\\"x-date\\\", signature=\\\"' + HMAC + '\\\"';\n   return { 'Authorization': Authorization, 'X-Date': GMTString }; \n\n}\n\nfunction renderType(inputType){\n   switch(inputType){\n      case'ScenicSpot':\n      renderViewData();\n      break;\n      case'Restaurant':\n      renderFoodData();\n      break;\n      case'Hotel':\n      renderHotelData();\n      break;\n      case'Activity':\n      // getAPI('Activity', city, num);\n      break;\n      default:\n         renderViewData();\n         renderFoodData();\n         renderHotelData();\n      break ;\n   };\n}\n\nfunction renderViewData(){\n   let str = '';\n\n   data.forEach(item => {\n      let content = `\n      <li class=\"col-md-4 mb-5 mb-md-0\">\n      <div class=\"card card-rounded card-hover-filter w-100\">\n        <div\n          class=\"d-flex flex-column justify-content-between bg-img h-400 card-rounded w-100\"\n          style=\"\n            background-image: url(${item.Picture.PictureUrl1});\n          \"\n        >\n          <div class=\"d-flex justify-content-between p-5\">\n            <div class=\"card-btn-group\">\n              <span class=\"material-icons-outlined link-star\">\n                star\n              </span>\n              <span class=\"me-1\">2.5</span>\n              <span class=\"material-icons-outlined\"> visibility </span>\n              <span>6 萬</span>\n            </div>\n            <div class=\"card-btn-circle\">\n              <span class=\"material-icons-outlined align-middle\">\n                bookmark_border\n              </span>\n            </div>\n          </div>\n          <div\n            class=\"\n              d-flex\n              justify-content-between\n              p-5\n              flex-wrap\n              gap-3\n              bg-dark\n              card-rounded-bottom\n            \"\n          >\n            <h3 class=\"h3 text-white text-shadow\">\n              <a href=\"#\"class=\"link-light\">${item.Name}</a></h3>\n            <div class=\"d-flex align-items-center text-white\">\n              <span class=\"material-icons-outlined align-items-center\">\n                location_on\n              </span>\n              ${item.City}\n            </div>\n          </div>\n        </div>\n      </div>\n    </li>\n      `;\n      str+=content;\n   });\n   \n   viewList.innerHTML = str ;\n}\n\nfunction renderFoodData(){\n   let str = '';\n\n   data.forEach(item => {\n      let content = `\n      <li class=\"col-md-4 mb-5 mb-md-0\">\n      <div class=\"card card-border card-rounded card-hover-shadow-2 h-100\">\n        <div class=\"position-relative\">\n          <a href=\"#\" class=\"stretched-link ratio-24x17 ratio-md-36x25\">\n          <img src=\"${item.Picture}\" alt=\"img\" class=\"card-bg-img card-rounded-top\"></a>\n          <div class=\"card-btn-group card-top-start\">\n            <a href=\"#\" class=\"material-icons-outlined link-star\">\n              star\n              </a>\n              <span class=\"me-1\">2.5</span>\n              <a href=\"#\" class=\"material-icons-outlined\">\n                visibility\n              </a>\n                <span>6 萬</span>\n          </div>\n          <a href=\"#\" class=\"card-btn-circle card-top-end\">\n            <span class=\"material-icons-outlined align-middle\">\n              bookmark_border\n              </span>\n          </a>\n        </div>\n        <div class=\"card-body py-2 px-5\">\n        <div class=\"d-flex align-items-center flex-wrap gap-3 mb-6\">\n          <h3 class=\"h3 text-black\">${item.Name}</h3>\n          <div class=\"d-flex align-items-center text-dark\">\n            <span class=\"material-icons-outlined align-items-center\">\n              location_on\n              </span>\n              ${item.City}\n          </div>\n        </div>\n        <a href=\"#\" class=\"link-dark\">${item.Address}</a>\n        <p class=\"text-dark\">營業時間：${item.OpenTime}</p>\n        <p class=\"text-dark\">電話：<a href=\"tel:${item.Phone}\" class=\"link-dark d-inline\">${item.Phone}</a></p>\n      </div>\n      </div>\n    </li>\n      `;\n      str+=content;\n   });\n   \n   foodList.innerHTML = str ;\n}\n\nfunction renderHotelData(){\n   let str = '';\n\n   data.forEach(item => {\n      let content = `\n      <li class=\"col-md-4 mb-5 mb-md-0\">\n      <div class=\"card card-border card-rounded card-hover-shadow-2 h-100\">\n        <div class=\"position-relative\">\n        <a href=\"#\" class=\"stretched-link ratio-24x17 ratio-md-36x25\">\n          <img src=\"${item.Picture}\" alt=\"img\" class=\"card-bg-img card-rounded-top\"></a></div>\n          <div class=\"card-btn-group card-top-start\">\n            <a href=\"#\" class=\"material-icons-outlined link-star\">\n              star\n              </a>\n              <span class=\"me-1\">2.5</span>\n              <a href=\"#\" class=\"material-icons-outlined\">\n                visibility\n              </a>\n                <span>6 萬</span>\n          </div>\n          <a href=\"#\" class=\"card-btn-circle card-top-end\">\n            <span class=\"material-icons-outlined align-middle\">\n              bookmark_border\n              </span>\n          </a>\n        <div class=\"card-body py-2 px-5\">\n        <div class=\"d-flex align-items-center flex-wrap gap-3 mb-6\">\n          <h3 class=\"h3 text-black\">${item.Name}</h3>\n          <div class=\"d-flex align-items-center text-dark\">\n            <span class=\"material-icons-outlined align-items-center\">\n              location_on\n              </span>\n              ${item.City}\n          </div>\n        </div>\n        <a href=\"#\" class=\"link-dark\">${item.Address} </a>\n        <p class=\"text-dark\">服務項目：<span>餐廳,咖啡廳,無線網路,國民旅遊卡,停車場</span></p>\n        <p class=\"text-dark\">電話：<a href=\"tel:${item.Phone}\" class=\"link-dark d-inline\">${item.Phone}</a></p>\n      </div>\n      </div>\n    </li>\n      `;\n\n      str+=content;\n\n   });\n   hotelList.innerHTML = str ;\n}\n\nfunction init(){\n   choseDataType('ScenicSpot', 'Taipei', 3);\n   // choseDataType('Restaurant', 'Taipei', 3);\n   // choseDataType('Hotel', 'Taipei', 3);\n   \n\n}\n\ninit();\n\n\n"]}